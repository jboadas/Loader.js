<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns = "http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<script src="./Loader.js" type="text/javascript"></script>
	<title>Loader.js</title>
</head>
<body>
<script type="text/javascript">

var loader;
var messageWithProgress = function(message, increment) {
	/// Create a new loader progress, tie this into onProgress event.
	var progress = 0;
	/// return the loaderId to be able to remove it.
	return loader.add({
		message: message, 
		getProgress: function() {
			return progress += increment;
		}
	});
};

window.onload = function() {
	var progress0 = 0;
	var progress1 = 0;
	var progress2 = 0;
	loader = new widgets.Loader({
		id: "loader",
		bars: 12,
		radius: 0,
		lineWidth: 20,
		lineHeight: 70,
		background: "rgba(0,0,0,0.5)",
		timeout: 30, // in seconds
		oncomplete: function() {
			console.log("done!");
		},
		onstart: function() {
			// call some function once loader has started
		}
	});

	/// Add a message with progress.
	var a = messageWithProgress('test 1', 1);
	/// Remove this message manually... (or you could wait for it to finish)
	loader.remove(a);

	/// Like these two ones...
	var b = messageWithProgress('test 2', 2);
	var c = messageWithProgress('test 3', 3);
};

</script>
<input value="stop loader" type="button" onclick="loader.stop()" style="font-size: 1em"><br>
<input value="new message" type="button" onclick="loader.message('loading...');" style="font-size: 1em"><br>
<input value="new message w/ progress" type="button" onclick="messageWithProgress('test', 2)" style="font-size: 1em">
</body>
</html>